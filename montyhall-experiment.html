<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ëª¬í‹°í™€ ë¬¸ì œ ì²´í—˜í•˜ê¸°</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 30px;
      }
      .door {
        display: inline-block;
        width: 100px;
        height: 150px;
        margin: 10px;
        background: #b33a3a; /* ì§™ì€ ë¶‰ì€ìƒ‰ */
        color: white;
        font-size: 48px;
        line-height: 150px;
        cursor: pointer;
        border-radius: 10px;
        user-select: none;
        transition: background-color 0.3s ease;
      }
      .opened {
        background: #e3bcbc;
        cursor: default;
        color: #4a0000;
        font-size: 48px;
      }
      #message {
        margin-top: 20px;
        font-size: 18px;
      }
      button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>ëª¬í‹°í™€ ë¬¸ì œ ì²´í—˜í•˜ê¸°</h1>
    <p>ë¬¸ í•˜ë‚˜ë¥¼ ê³¨ë¼ í´ë¦­í•˜ì„¸ìš”.</p>

    <div id="doors">
      <div class="door" data-index="0">ë¬¸ 1</div>
      <div class="door" data-index="1">ë¬¸ 2</div>
      <div class="door" data-index="2">ë¬¸ 3</div>
    </div>

    <div id="message"></div>
    <button id="restartBtn" style="display: none">ë‹¤ì‹œí•˜ê¸°</button>

    <script>
      let doors = document.querySelectorAll(".door")
      let message = document.getElementById("message")
      let restartBtn = document.getElementById("restartBtn")

      let carDoor = -1 // ìë™ì°¨ê°€ ìˆëŠ” ë¬¸
      let playerChoice = -1 // í”Œë ˆì´ì–´ê°€ ì²˜ìŒ ì„ íƒí•œ ë¬¸
      let openedDoor = -1 // ì‚¬íšŒìê°€ ì—° ë¬¸
      let stage = 0 // 0:ì„ íƒ ëŒ€ê¸°, 1:ì‚¬íšŒì ë¬¸ ì—´ê¸°, 2:ìµœì¢… ì„ íƒ

      function resetGame() {
        carDoor = Math.floor(Math.random() * 3)
        playerChoice = -1
        openedDoor = -1
        stage = 0
        message.textContent = "ë¬¸ í•˜ë‚˜ë¥¼ ê³¨ë¼ í´ë¦­í•˜ì„¸ìš”."
        restartBtn.style.display = "none"
        doors.forEach((d) => {
          d.textContent = "ë¬¸ " + (parseInt(d.dataset.index) + 1)
          d.style.background = "#b33a3a"
          d.style.color = "white"
          d.classList.remove("opened")
          d.style.pointerEvents = "auto"
          d.style.cursor = "pointer"
          d.style.fontSize = "24px"
          d.style.lineHeight = "150px"
        })
      }

      function openGoatDoor() {
        for (let i = 0; i < 3; i++) {
          if (i !== playerChoice && i !== carDoor) {
            openedDoor = i
            doors[i].textContent = "ğŸ"
            doors[i].style.background = "#e3bcbc"
            doors[i].style.color = "#4a0000"
            doors[i].classList.add("opened")
            doors[i].style.pointerEvents = "none"
            doors[i].style.cursor = "default"
            doors[i].style.fontSize = "48px"
            doors[i].style.lineHeight = "150px"
            break
          }
        }
      }

      function finalChoice(newChoice) {
        doors.forEach((d) => (d.style.pointerEvents = "none"))
        if (newChoice === carDoor) {
          doors[newChoice].textContent = "ğŸš—"
          doors[newChoice].style.background = "#27632a" // ì§™ì€ ì´ˆë¡ (ì„±ê³µ)
          doors[newChoice].style.color = "white"
          doors[newChoice].style.fontSize = "48px"
          doors[newChoice].style.lineHeight = "150px"
          message.textContent = "ì¶•í•˜í•©ë‹ˆë‹¤! ìë™ì°¨ë¥¼ ì°¾ì•˜ì–´ìš”!"
        } else {
          doors[newChoice].textContent = "ğŸ"
          doors[newChoice].style.background = "#8b0000" // ì§™ì€ ë¹¨ê°• (ì‹¤íŒ¨)
          doors[newChoice].style.color = "white"
          doors[newChoice].style.fontSize = "48px"
          doors[newChoice].style.lineHeight = "150px"

          doors[carDoor].textContent = "ğŸš—"
          doors[carDoor].style.background = "#27632a"
          doors[carDoor].style.color = "white"
          doors[carDoor].style.fontSize = "48px"
          doors[carDoor].style.lineHeight = "150px"

          message.textContent =
            "ì•„ì‰½ë„¤ìš”. ìë™ì°¨ëŠ” ë¬¸ " + (carDoor + 1) + "ì— ìˆì—ˆìŠµë‹ˆë‹¤."
        }
        restartBtn.style.display = "inline-block"
      }

      doors.forEach((door) => {
        door.addEventListener("click", () => {
          let idx = parseInt(door.dataset.index)

          if (stage === 0) {
            playerChoice = idx
            message.textContent = `ë¬¸ ${playerChoice + 1}ì„(ë¥¼) ì„ íƒí–ˆìŠµë‹ˆë‹¤. ì‚¬íšŒìê°€ ì—¼ì†Œê°€ ìˆëŠ” ë¬¸ì„ ì—½ë‹ˆë‹¤.`
            openGoatDoor()
            stage = 1
            message.textContent +=
              " ì´ì œ ì„ íƒì„ ë°”ê¾¸ì‹œê² ìŠµë‹ˆê¹Œ? ë¬¸ì„ ë‹¤ì‹œ ì„ íƒí•˜ì„¸ìš”."
          } else if (stage === 1) {
            if (idx === openedDoor) {
              message.textContent = "ì´ë¯¸ ì—° ë¬¸ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ë¬¸ì„ ì„ íƒí•˜ì„¸ìš”."
              return
            }
            finalChoice(idx)
            stage = 2
          }
        })
      })

      restartBtn.addEventListener("click", () => resetGame())

      resetGame()
    </script>
  </body>
</html>
